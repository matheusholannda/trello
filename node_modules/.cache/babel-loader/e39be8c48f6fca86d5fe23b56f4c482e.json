{"ast":null,"code":"import _objectSpread from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/src/pages/BoardsPage.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { UserOutlined, StarOutlined } from '@ant-design/icons';\nimport { boardService } from '../application/services';\nimport { withAuthorization } from '../auth/auth-hoc';\nimport { BoardTitle } from '../components/BoardTitle';\nimport { BoardModal } from '../components/BoardModal';\nimport { BoardsPageSkeleton } from '../components/BoardsPageSkeleton';\nexport var BoardsPage = withAuthorization(function (authUser) {\n  return !!authUser;\n})(function () {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      boards = _useState2[0],\n      setBoards = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalVisible = _useState6[0],\n      setModalVisible = _useState6[1];\n\n  var history = useHistory();\n  useEffect(function () {\n    setLoading(true);\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetchBoards();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, []);\n\n  var fetchBoards = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return boardService.userBoards().on('value', function (snapshot) {\n                if (!snapshot) {\n                  return;\n                }\n\n                setBoards(objectToArray(snapshot.val() || {}));\n                setLoading(false);\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function fetchBoards() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var addBoard = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(board) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return boardService.addBoard(board);\n\n            case 2:\n              setModalVisible(false);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function addBoard(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var starBoard = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(board, starred) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return boardService.updateBoard(board, {\n                starred: starred\n              });\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function starBoard(_x2, _x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var objectToArray = function objectToArray(data) {\n    return !data ? [] : Object.values(data).map(function (value, index) {\n      return _objectSpread(_objectSpread({}, value), {}, {\n        key: Object.keys(data)[index]\n      });\n    });\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(BoardsPageSkeleton, {\n      count: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 16\n      }\n    });\n  }\n\n  var starredBoards = boards.filter(function (board) {\n    return board.starred;\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-16 py-4 px-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, !!starredBoards.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex mb-3 items-center text-xl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(StarOutlined, {\n    className: \"mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }), \" Starred Boards\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid grid-cols-4 gap-4 mb-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, starredBoards.map(function (board) {\n    return /*#__PURE__*/React.createElement(BoardTitle, {\n      key: board === null || board === void 0 ? void 0 : board.key,\n      title: board.title,\n      handleBoardClick: function handleBoardClick() {\n        return history.push(\"boards/\".concat(board === null || board === void 0 ? void 0 : board.key));\n      },\n      handleBoardStarToggling: function handleBoardStarToggling() {\n        return starBoard(board === null || board === void 0 ? void 0 : board.key, !board.starred);\n      },\n      starred: board.starred,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 29\n      }\n    });\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex mb-3 items-center text-xl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UserOutlined, {\n    className: \"mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }), \" Quadros\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid grid-cols-4 gap-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, boards.map(function (board) {\n    return /*#__PURE__*/React.createElement(BoardTitle, {\n      key: board === null || board === void 0 ? void 0 : board.key,\n      title: board.title,\n      handleBoardClick: function handleBoardClick() {\n        return history.push(\"boards/\".concat(board === null || board === void 0 ? void 0 : board.key));\n      },\n      handleBoardStarToggling: function handleBoardStarToggling() {\n        return starBoard(board === null || board === void 0 ? void 0 : board.key, !board.starred);\n      },\n      starred: board.starred,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    });\n  }), /*#__PURE__*/React.createElement(BoardTitle, {\n    title: \"Add new board\",\n    addition: true,\n    handleBoardClick: function handleBoardClick() {\n      return setModalVisible(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(BoardModal, {\n    action: addBoard,\n    closeModal: function closeModal() {\n      return setModalVisible(false);\n    },\n    visible: modalVisible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }));\n});","map":{"version":3,"sources":["/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/src/pages/BoardsPage.js"],"names":["React","useEffect","useState","useHistory","UserOutlined","StarOutlined","boardService","withAuthorization","BoardTitle","BoardModal","BoardsPageSkeleton","BoardsPage","authUser","boards","setBoards","loading","setLoading","modalVisible","setModalVisible","history","fetchBoards","userBoards","on","snapshot","objectToArray","val","addBoard","board","starBoard","starred","updateBoard","data","Object","values","map","value","index","key","keys","starredBoards","filter","length","title","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { UserOutlined, StarOutlined } from '@ant-design/icons';\nimport { boardService } from '../application/services';\nimport { withAuthorization } from '../auth/auth-hoc';\nimport { BoardTitle } from '../components/BoardTitle';\nimport { BoardModal } from '../components/BoardModal';\nimport { BoardsPageSkeleton } from '../components/BoardsPageSkeleton';\n\nexport const BoardsPage = withAuthorization((authUser) => !!authUser)(() => {\n    const [boards, setBoards] = useState({});\n    const [loading, setLoading] = useState(true);\n    const [modalVisible, setModalVisible] = useState(false);\n    const history = useHistory();\n\n    useEffect(() => {\n        setLoading(true);\n        (async () => {\n            await fetchBoards();\n        })();\n    }, []);\n\n    const fetchBoards = async () => {\n        await boardService.userBoards().on('value', (snapshot) => {\n            if (!snapshot) {\n                return;\n            }\n            setBoards(objectToArray(snapshot.val() || {}));\n            setLoading(false);\n        });\n    };\n\n    const addBoard = async (board) => {\n        await boardService.addBoard(board);\n        setModalVisible(false);\n    };\n\n    const starBoard = async (board, starred) => {\n        await boardService.updateBoard(board, { starred });\n    };\n\n    const objectToArray = (data) =>\n        !data\n            ? []\n            : Object.values(data).map((value, index) => ({\n                  ...value,\n                  key: Object.keys(data)[index],\n              }));\n\n    if (loading) {\n        return <BoardsPageSkeleton count={4} />;\n    }\n\n    const starredBoards = boards.filter((board) => board.starred);\n\n    return (\n        <div className={`pt-16 py-4 px-3`}>\n            {!!starredBoards.length && (\n                <>\n                    <div className=\"flex mb-3 items-center text-xl\">\n                        <StarOutlined className={`mr-2`} /> Starred Boards\n                    </div>\n\n                    <div className=\"grid grid-cols-4 gap-4 mb-6\">\n                        {starredBoards.map((board) => (\n                            <BoardTitle\n                                key={board?.key}\n                                title={board.title}\n                                handleBoardClick={() => history.push(`boards/${board?.key}`)}\n                                handleBoardStarToggling={() =>\n                                    starBoard(board?.key, !board.starred)\n                                }\n                                starred={board.starred}\n                            />\n                        ))}\n                    </div>\n                </>\n            )}\n\n            <div className=\"flex mb-3 items-center text-xl\">\n                <UserOutlined className={`mr-2`} /> Quadros\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-4\">\n                {boards.map((board) => (\n                    <BoardTitle\n                        key={board?.key}\n                        title={board.title}\n                        handleBoardClick={() => history.push(`boards/${board?.key}`)}\n                        handleBoardStarToggling={() => starBoard(board?.key, !board.starred)}\n                        starred={board.starred}\n                    />\n                ))}\n                <BoardTitle\n                    title=\"Add new board\"\n                    addition={true}\n                    handleBoardClick={() => setModalVisible(true)}\n                />\n            </div>\n\n            <BoardModal\n                action={addBoard}\n                closeModal={() => setModalVisible(false)}\n                visible={modalVisible}\n            />\n        </div>\n    );\n});\n"]},"metadata":{},"sourceType":"module"}