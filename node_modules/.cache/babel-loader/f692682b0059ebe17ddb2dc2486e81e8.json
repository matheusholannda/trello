{"ast":null,"code":"import _objectSpread from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/src/pages/BoardPage.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Board from 'react-trello';\nimport { boardService } from '../application/services';\nimport { withAuthorization } from '../auth/auth-hoc';\nimport { BoardSkeleton } from '../components/BoardSkeleton';\nexport var BoardPage = withRouter(withAuthorization(function (authUser) {\n  return !!authUser;\n})(function (props) {\n  var _useState = useState({\n    lanes: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      board = _useState2[0],\n      setBoard = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return fetchBoard();\n\n            case 3:\n              setLoading(false);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, []);\n\n  var fetchBoard = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return boardService.getBoard(boardId());\n\n            case 2:\n              data = _context2.sent.val();\n              setBoard(prepareBoard(data));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function fetchBoard() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Fill empty properties that are important for Board component\n\n\n  var prepareBoard = function prepareBoard(board) {\n    return _objectSpread(_objectSpread({}, board), {}, {\n      lanes: ((board === null || board === void 0 ? void 0 : board.lanes) || []).map(function (lane) {\n        return _objectSpread(_objectSpread({}, lane), {}, {\n          cards: (lane === null || lane === void 0 ? void 0 : lane.cards) || []\n        });\n      })\n    });\n  };\n\n  var boardId = function boardId() {\n    var _props$match, _props$match$params;\n\n    return (_props$match = props.match) === null || _props$match === void 0 ? void 0 : (_props$match$params = _props$match.params) === null || _props$match$params === void 0 ? void 0 : _props$match$params.board;\n  };\n\n  var handleDataChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return boardService.updateBoard(boardId(), data);\n\n            case 2:\n              return _context3.abrupt(\"return\", _context3.sent);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleDataChange(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(BoardSkeleton, {\n      count: 5,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 20\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Board, {\n    className: \"pt-16 bg-blue-500 h-full\",\n    canAddLanes: true,\n    editable: true,\n    data: {\n      lanes: board.lanes || []\n    },\n    onDataChange: handleDataChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  });\n}));","map":{"version":3,"sources":["/Users/matheusholannda/Documents/Trabalhos/react-trello-clone-main/src/pages/BoardPage.js"],"names":["React","useEffect","useState","withRouter","Board","boardService","withAuthorization","BoardSkeleton","BoardPage","authUser","props","lanes","board","setBoard","loading","setLoading","fetchBoard","getBoard","boardId","data","val","prepareBoard","map","lane","cards","match","params","handleDataChange","updateBoard"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Board from 'react-trello';\nimport { boardService } from '../application/services';\nimport { withAuthorization } from '../auth/auth-hoc';\nimport { BoardSkeleton } from '../components/BoardSkeleton';\n\nexport const BoardPage = withRouter(\n    withAuthorization((authUser) => !!authUser)((props) => {\n        const [board, setBoard] = useState({\n            lanes: [],\n        });\n        const [loading, setLoading] = useState(false);\n\n        useEffect(() => {\n            (async () => {\n                setLoading(true);\n                await fetchBoard();\n                setLoading(false);\n            })();\n        }, []);\n\n        const fetchBoard = async () => {\n            const data = (await boardService.getBoard(boardId())).val();\n            setBoard(prepareBoard(data));\n        };\n\n        // Fill empty properties that are important for Board component\n        const prepareBoard = (board) => ({\n            ...board,\n            lanes: (board?.lanes || []).map((lane) => ({\n                ...lane,\n                cards: lane?.cards || [],\n            })),\n        });\n\n        const boardId = () => props.match?.params?.board;\n\n        const handleDataChange = async (data) => await boardService.updateBoard(boardId(), data);\n\n        if (loading) {\n            return <BoardSkeleton count={5} />;\n        }\n\n        return (\n            <Board\n                className={`pt-16 bg-blue-500 h-full`}\n                canAddLanes={true}\n                editable={true}\n                data={{\n                    lanes: board.lanes || [],\n                }}\n                onDataChange={handleDataChange}\n            />\n        );\n    })\n);\n"]},"metadata":{},"sourceType":"module"}